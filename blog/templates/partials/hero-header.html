{# partial: templates/partials/hero_profile.html #}
{% load static %}

<div class="hero-inner">
  <div class="brand" {% if is_own_profile %}style="text-align:center;"{% endif %}>
    
    {% if is_own_profile %}
      <h1>{{ profile_user.username }}</h1>
      <div class="profile-photo">
        {% if profile_user.profile_photo %}
          <img src="{{ profile_user.profile_photo.url }}" alt="{{ profile_user.username }}">
        {% else %}
          <img src="{% static 'icons/default_profile.png' %}" alt="Avatar par défaut">
        {% endif %}
      </div>

      <p class="lead">
        {% if profile_user.role == "Subscriber" %}
          Abonné
        {% else %}
          Créateur
        {% endif %}
      </p>

    {% else %}
      <h1 class="logo">Willx</h1>
      <div class="profile-photo" style="border: 2px solid var(--accent);">
        {% if user.profile_photo %}
          <img src="{{ user.profile_photo.url }}" alt="{{ user.username }}’s avatar" loading="lazy">
        {% else %}
          <img src="{% static 'icons/default_profile.png' %}" alt="Avatar par défaut" loading="lazy">
        {% endif %}
      </div>

      <p class="lead">
        {% if user.is_authenticated %}
          <a href="{% url 'user-profile' username=user.username %}">Quoi de neuf {{ user.username }} !</a>
        {% else %}
          Bienvenue sur Willx — partagez vos photos et explorez de nouveaux horizons !
        {% endif %}
      </p>
    {% endif %}

    <!-- Section Stats -->
    <div class="profile-stats" style="{% if is_own_profile %}display:flex; justify-content:center; gap:2rem; margin-top:1rem;{% endif %}">
      {% if perms.blog.add_blog %}
        <div class="stat">
          <span>{{ followers_count }}</span>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
               stroke-width="1.8" stroke="currentColor" class="icon">
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 20.25a7.5 7.5 0 0115 0v.75H4.5v-.75z" />
          </svg>
        </div>
      {% endif %}

      <div class="stat">
        <span>{{ photos_count }} Publication{% if photos_count > 1 %}s{% endif %}</span>
      </div>

      <div class="stat">
        {{ likes_count }}
        <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" class="icon">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09
                   C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
      </div>
    </div>
  </div>
</div>